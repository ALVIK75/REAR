# REAR ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Relax-and-Recover

–ü—Ä–æ–µ–∫—Ç **REAR** ‚Äî —ç—Ç–æ –Ω–∞–±–æ—Ä –º–æ–¥—É–ª—å–Ω—ã—Ö Bash-—Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ **Relax-and-Recover (ReaR)** —Å —É–ø–æ—Ä–æ–º –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –∏ DevOps-–∏–Ω–∂–µ–Ω–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–º –Ω—É–∂–µ–Ω **–Ω–∞–¥—ë–∂–Ω—ã–π –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã–π disaster recovery workflow**.

---

## üß™ Tested on / Supported OS

### Tested on

* ALT Linux 11 (bare metal, UEFI)

### Expected to work on

* ALT Linux 10+
* Debian 11 / 12
* Ubuntu Server 20.04+
* RHEL / Rocky Linux / AlmaLinux 8+

> –ü—Ä–æ–µ–∫—Ç –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ ReaR –∏ GNU coreutils. –ù–∞ –¥—Ä—É–≥–∏—Ö –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞—Ö –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è.

---

## üîë –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –ø—Ä–æ–µ–∫—Ç–∞

* –°—Ç—Ä–æ–≥–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–æ–¥–µ–ª–∏ ReaR ([https://relax-and-recover.org/documentation/](https://relax-and-recover.org/documentation/))
* –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–µ–∂–¥–µ –≤—Å–µ–≥–æ ‚Äî –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ —Ä–∞–∑—Ä—É—à–∏—Ç–µ–ª—å–Ω—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏
* –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å ‚Äî –∫–∞–∂–¥—ã–π —à–∞–≥ –≤—ã–Ω–µ—Å–µ–Ω –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –±–ª–æ–∫
* –ú–∏–Ω–∏–º—É–º —Ä—É—á–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
* –ü—Ä–æ–∑—Ä–∞—á–Ω–∞—è –∏ —á–∏—Ç–∞–µ–º–∞—è –ª–æ–≥–∏–∫–∞

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```
REAR/
‚îú‚îÄ‚îÄ block1-config.sh              # –ì–ª–æ–±–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ block2-data-functions.sh      # –§—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏ –∏ –±—ç–∫–∞–ø–∞–º–∏
‚îú‚îÄ‚îÄ block3-package-functions.sh   # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤
‚îú‚îÄ‚îÄ block4-usb-functions.sh       # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è USB
‚îú‚îÄ‚îÄ block5-rear-install.sh        # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ ReaR –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ block6-system-analysis.sh     # –ê–Ω–∞–ª–∏–∑ —Å–∏—Å—Ç–µ–º—ã –∏ –æ—Ü–µ–Ω–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –±—ç–∫–∞–ø–∞
‚îú‚îÄ‚îÄ block7-usb-selection.sh       # –í—ã–±–æ—Ä USB-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
‚îú‚îÄ‚îÄ block8-safety-checks.sh       # –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ block9-device-preparation.sh  # –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
‚îú‚îÄ‚îÄ block10-formatting.sh         # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ USB
‚îú‚îÄ‚îÄ block11-rear-config.sh        # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è /etc/rear/local.conf
‚îú‚îÄ‚îÄ block12-flash-scripts.sh      # README –∏ —É—Ç–∏–ª–∏—Ç—ã –Ω–∞ USB
‚îú‚îÄ‚îÄ block13-final-checks.sh       # –§–∏–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
‚îî‚îÄ‚îÄ full-rear-setup.sh            # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

* Linux
* Bash ‚â• 4.x
* Root-–¥–æ—Å—Ç—É–ø
* USB-–Ω–æ—Å–∏—Ç–µ–ª—å

### –ó–∞–ø—É—Å–∫

```bash
sudo ./full-rear-setup.sh
```

–°–∫—Ä–∏–ø—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç –≤—Å–µ —ç—Ç–∞–ø—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–∏ –ª—é–±–æ–π –æ–ø–∞—Å–Ω–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏.

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–Ω–∞—Ç–µ–ª—å–Ω–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:

* USB-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ **–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**
* –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ç–∏–ø —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, —Ä–∞–∑–º–µ—Ä, —É—á–∞—Å—Ç–∏–µ –≤ RAID/LVM, —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã
* –¢—Ä–µ–±—É–µ—Ç—Å—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–ë–µ–∑ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–æ–∫ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ.

---

## üíæ –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ USB

* –û—Å–Ω–æ–≤–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç: **exFAT** (–Ω–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è 4GB)
* Fallback: **FAT32** (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ 4GB)

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ —É—Ç–∏–ª–∏—Ç `mkfs.exfat` / `mkexfatfs`, –∞ –Ω–µ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è ¬´–ø–æ–¥–¥–µ—Ä–∂–∫–∞ ReaR¬ª.

---

## üìÇ –¢–æ—á–∫–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—É—Ç—å:

```text
/mnt/rear-usb
```

–û–Ω –æ–¥–∏–Ω–∞–∫–æ–≤ –≤ —Ä–∞–±–æ—á–µ–π —Å–∏—Å—Ç–µ–º–µ –∏ rescue-—Å—Ä–µ–¥–µ:

```bash
BACKUP_URL="file:///mnt/rear-usb/backups"
OUTPUT_URL="file:///mnt/rear-usb/output"
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ReaR

`/etc/rear/local.conf` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏:

* —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ ReaR
* –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
* –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ `COPY_AS_IS`

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

```bash
rear checklayout
rear validate
rear mkrescue
```

---

## ‚ôªÔ∏è Recovery workflow (–∫—Ä–∞—Ç–∫–æ)

1. –ó–∞–≥—Ä—É–∑–∫–∞ —Å rescue-–Ω–æ—Å–∏—Ç–µ–ª—è
2. Automount USB –≤ `/mnt/rear-usb`
3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –±—ç–∫–∞–ø–æ–≤
4. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ `rear recover`

---

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

* –ü—Ä–æ–µ–∫—Ç –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π —á–∞—Å—Ç—å—é ReaR
* Recovery –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

---

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

PR –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è, –æ—Å–æ–±–µ–Ω–Ω–æ –≤ —á–∞—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è ¬´–∫–∞–∫ –µ—Å—Ç—å¬ª. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞ —Å–≤–æ–π —Ä–∏—Å–∫.
