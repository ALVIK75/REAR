# Disaster Recovery Checklist (ReaR)

Этот чек-лист предназначен для **администратора**, выполняющего восстановление системы с помощью **ReaR**.

Используйте его **каждый раз**, особенно при восстановлении **на отличающееся железо**.

---

## 1️⃣ Перед загрузкой rescue
**(подготовка и понимание контекста)**

**Что это?**  
Этап, на котором администратор должен чётко понимать, *что именно восстанавливается* и *на какое железо*.

Проверьте:
- [ ] Понимаю, **какая система** восстанавливается (hostname, назначение)
- [ ] Понимаю **исходный disk layout** (диски, размеры, LVM/RAID)
- [ ] Понимаю, **на какое железо** выполняется восстановление
- [ ] Backup **существует и актуален**
- [ ] Используется **корректный rescue-носитель** для этой системы

Если нет уверенности хотя бы в одном пункте — **остановиться**.

---

## 2️⃣ После загрузки rescue
**(проверка среды восстановления)**

**Что это?**  
Проверка, что rescue-среда готова и видит данные для восстановления.

Проверьте:
- [ ] Rescue-система загрузилась без ошибок
- [ ] USB автоматически смонтирован в `/mnt/rear-usb`
- [ ] Команда:
  ```bash
  mount | grep rear-usb
  ```
  показывает USB-устройство
- [ ] Каталог `/mnt/rear-usb/backups` существует и доступен
- [ ] Backup-файлы видны (`ls /mnt/rear-usb/backups`)

❗ **Если любой пункт не выполнен — остановиться.**  
Recovery без доступа к backup невозможен.

---

## 3️⃣ Проверка перед recover
**(критическая точка принятия решения)**

**Что это?**  
Последний безопасный момент перед разрушительными действиями.

Обязательно выполните:
```bash
rear checklayout
```

Проверьте и осознайте:
- [ ] Я понимаю все предупреждения ReaR
- [ ] Я понимаю, **какие диски будут уничтожены**
- [ ] Лишние диски (если есть) **не участвуют в recovery**
- [ ] Несоответствия layout (если есть) **мне понятны**

⚠️ Предупреждения ReaR — это защита, а не ошибка.

---

## 4️⃣ Recovery
**(разрушительный этап)**

**Что это?**  
Этап, на котором ReaR удаляет разметку, создаёт файловые системы и разворачивает данные.

Во время выполнения:
- [ ] Запускаю:
  ```bash
  rear recover
  ```
- [ ] Внимательно читаю **каждый вопрос**
- [ ] Не подтверждаю действия автоматически
- [ ] Не игнорирую предупреждения

❗ Ошибки на этом этапе **необратимы**.

---

## 5️⃣ После reboot
**(проверка результата)**

**Что это?**  
Контроль, что восстановленная система работоспособна.

После перезагрузки:
- [ ] Система загрузилась без emergency-shell
- [ ] GRUB работает корректно
- [ ] Проверен вывод:
  ```bash
  lsblk
  df -h
  ```
- [ ] Проверен журнал:
  ```bash
  journalctl -xb
  ```
- [ ] Критичные сервисы запущены

---

## ⚠️ Критическое правило

> **Если есть сомнения — не продолжать recovery.**

ReaR безопасен **только при осознанных действиях администратора**. Этот чек-лист — обязательный инструмент защиты от фатальных ошибок.

